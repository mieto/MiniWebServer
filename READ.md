今回はJDBCとHttpServerを使ってデータベースに接続し、データをローカルサーバ内で表示するというシンプルなWebアプリです。
備忘録的な感じです。あまり発信している自覚はないのと自分がやった事を言語化しているだけなので悪しからず。

gitコマンドの復習も兼ねています。

メインクラス MiniWebServer
HttpServerを使い、ポート番号(8080)を記述しデータベースの内容を表示する根幹である。
createContext でurlに/meiboと続けて指定することが着火のタイミングで実際にdbから取得した内容を表示できるようにする。
特別なイベントリスナなどはない。

MeiboHandler
HttpHandlerのインターフェイスを実装してユーザからのリクエストに応答するこの場合getDatabaseDataで取得した結果をhtmlで記述することを明示化。
実際にOutputStreamのインスタンスで記述されている。

getDatabaseData
sqlで実際に得た結果を取ってくる。ただしvoidではなくStringとしているため最後にreturn文でString型として渡す必要がある。StringBuilderライブラリを使う事でhtmlで囲まれたデータを一本化してByte化しています。
またJDBCのドライバが必要になり、今回はSqliteで適当に作成したテーブルからhtmlのtable形式でMeiboHandlerにresponseとして渡すことになる。
具体的にはお決まりのConnection -> Statement -> Resultset で接続、ステート作成、sql実行して結果の保持。

各例外処理はconsoleのみにログっぽく必要するのもアリ。最終的にはそれすらもStiringBuilderのインスタンスに格納し、メインクラスに渡す等の事を行った。


感想
ReactやDjangoの方が楽です。しかし、Java初心者(もうすぐ新卒SE)としてどういった流れでデータベースの接続が行われていて、どのようにしてサーバが確立しているのかという事について学習できました。
ここで終わりではなく今後はサーバに負荷がかからないDAOなどのデザインパターンやストリームに関することなど学ぶことが多い感じです。今回はこの辺で。
